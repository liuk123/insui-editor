<div class="t-edit-link">
  <label class="t-label">
    <div class="t-label-properties">
      @if (anchorMode) {
        Anchor
      } @else {
        URL
      }
    </div>
    <div class="t-url">
      @if (anchorMode) {
        <div class="t-prefix">#</div>
      } @else {}
      <input
        #inputRef
        class="t-input"
        [(ngModel)]="url"
        (blur)="onBlur(url)"
        (keydown.prevent.enter)="onSave()"
      />
    </div>
  </label>
  <button
    class="t-button"
    type="button"
    appearance="icon"
    title="Clear"
    insIconButton
    [iconStart]="options.icons.popupLinkRemove"
    (mousedown.prevent)="onClear()"
  ></button>
  <button
    class="t-button"
    type="button"
    appearance="icon"
    title="Save"
    insIconButton
    [iconStart]="options.icons.popupLinkSave"
    (mousedown.prevent)="onSave()"
  ></button>
  <button
    class="t-button"
    type="button"
    appearance="icon"
    title="Remove link"
    insIconButton
    [iconStart]="options.icons.popupPreviewLinkClear"
    (mousedown.prevent)="onRemove()"
  ></button>
</div>

@if (showAnchors) {
  <hr class="t-hr" />
  <div class="t-anchor-list">
    @for (id of anchorIds | insFilterAnchors: (anchorMode ? '#' : '') : url; track id) {
      <button type="button" class="t-anchor" (mousedown)="setAnchor(id)">#{{ id }}</button>
    }
  </div>
}
